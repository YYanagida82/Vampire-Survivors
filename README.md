# [Vampire Survivors Clone](https://yyanagida82.github.io/Vampire-Survivors-Clone/)

---

## 概要

人気のローグライクアクションゲーム「Vampire Survivors」のクローンゲームです。

次々と迫りくる敵の群れからできるだけ長く生き残ります。敵を倒して経験値ジェムを獲得し、レベルアップすると武器やアイテムを選択できます。それらを組み合わせてキャラクターを強化し、絶え間ない猛攻を30分間凌ぎ切りましょう。

---

## 主な特徴

-   無限に湧き出る敵とのスリリングな戦闘
-   レベルアップによる武器・アイテムの選択とキャラクター強化
-   多様な武器とパッシブアイテムの組み合わせによる戦略性

---

## 操作方法

-   **移動**: `WASD`
-   **決定/選択**: `マウスクリック`

---

## 実装済みの機能

-   **キャラクター選択**: 開始時に異なる能力を持つキャラクターを選択できます。
-   **武器システム**: 複数のユニークな武器（ナイフ、鞭など）を装備・レベルアップできます。
-   **パッシブアイテム**: キャラクターのステータスを恒久的に強化するアイテム。
-   **レベルアップシステム**: 敵が落とす経験値ジェムを集めてレベルアップし、新たな能力を獲得します。
-   **敵のスポーンシステム**: ゲームの経過時間と共に、より強力な敵が大量に出現します。
-   **アイテムドロップ**: 敵や破壊可能なオブジェクトから、回復アイテムや経験値ジェムがドロップします。

---

## 技術スタック

-   **ゲームエンジン**: Unity `6000.2.2f1`
-   **言語**: C#
-   **UI**: Unity UI (`com.unity.ugui`)
-   **2D機能**: 2D Animation, 2D Sprite, Tilemap, パーティクルシステムなど

---

### アーキテクチャ・設計パターン

-   **ScriptableObjectによるデータ管理**: 武器、キャラクター、敵の出現パターンといったゲームデータを`ScriptableObject`で管理。コードからデータを分離し、バランス調整や仕様変更を容易にしています。
-   **オブジェクトプーリング**: 敵、弾丸、エフェクトなど、頻繁に生成・破棄されるオブジェクトを再利用する`ObjectPool`を実装。自作コードでコアな性能改善を行い、ガベージコレクションによるパフォーマンスの低下を防いでいます。

---

## 継続的デプロイ (CI/CD) と技術的挑戦の克服

### ホスティング環境
-   **ホスティング環境**: GitHub Pages
-   **継続的デプロイ (CI/CD)**: GitHub Actionsを利用した自動デプロイパイプラインを構築。

### 克服した技術的課題
Web公開において大容量ファイルのホスティングという困難な課題に直面し、それを解決しました。

-  **大容量ファイル（LFS）の壁**: UnityのWebGLビルドが100MBを超える大容量ファイル（Git LFSで管理）を含むため、Vercelなど多くのホスティングサービスの制限に直面。
-  **解決策**: デプロイ環境をVercelからGitHub Pagesへ切り替え、GitHub Actionsの権限設定（`pages: write`、IDトークン）を自力でデバッグ・構築することで、大容量ファイルを含むCI/CDパイプラインの安定運用を実現。

---

## 現在の課題とデバッグで解決した問題

-   **パフォーマンスの最適化**:
    -   オブジェクトプーリングは導入済みですが、ゲーム後半で敵や弾幕が大量に表示されると、依然として処理落ちが発生します。さらなる最適化（例：2D Physicsの軽量化、バッチ処理の検討）を模索中です。
-   **解決済み：初期クラッシュ（Null参照）**:
    -   ゲーム開始時のオブジェクト生成処理（`PropRandomizer`スクリプト）で発生していた**`NullReferenceException`について、原因を特定し、コードに厳格なNullチェックとリストの空チェックを実装することで修正しました。

---

## 今後の実装予定と技術的な目標

-   **Assetによる機能拡張**: 現在のバージョンは極力アセットに頼らず基本機能をC#で自作していますが、今後はDOTweenなどの実用的なアセットを積極的に学習・活用し、開発効率とアニメーション表現の向上を目指します。
-   **主要なゲーム機能の追加**:
    -   [ ] 武器の進化（特定の武器とパッシブアイテムの組み合わせでアンロック）
    -   [ ] 宝箱システム
    -   [ ] ステージ・新規キャラクターの追加
    -   [ ] 永続的なアップグレード要素（ゴールドを使ったキャラクター強化など）
    -   [ ] 実績システム
